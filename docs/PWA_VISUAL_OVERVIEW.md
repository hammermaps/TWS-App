# ğŸ“± PWA Features - Visuelle Ãœbersicht

## Architektur-Diagramm

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Browser / App                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              Vue 3 Application                        â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚   AppHeader  â”‚  â”‚DefaultLayout â”‚  â”‚   Views    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚     with     â”‚  â”‚     with     â”‚  â”‚            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚OnlineStatus  â”‚  â”‚OfflineBanner â”‚  â”‚  Flushing  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚   Toggle     â”‚  â”‚              â”‚  â”‚  etc.      â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚           Pinia Stores                        â”‚   â”‚  â”‚
â”‚  â”‚  â”‚                                                â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ OnlineStatus    â”‚  â”‚ OfflineFlush     â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ Store           â”‚  â”‚ Storage/Sync     â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚                 â”‚  â”‚                  â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ - isOnline      â”‚  â”‚ - Local Storage  â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ - pingServer()  â”‚  â”‚ - Auto Sync      â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â”‚ - manual Mode   â”‚  â”‚                  â”‚   â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚  â”‚  â”‚           Composables                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - useFeatureAccess()                         â”‚   â”‚  â”‚
â”‚  â”‚  â”‚  - useHealth()                                â”‚   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           Service Worker (PWA)                        â”‚  â”‚
â”‚  â”‚                                                        â”‚  â”‚
â”‚  â”‚  - Cache Static Assets                                â”‚  â”‚
â”‚  â”‚  - NetworkFirst fÃ¼r API                               â”‚  â”‚
â”‚  â”‚  - Offline Support                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                          â†•                                    â”‚
â”‚                    (HTTPS/HTTP)                              â”‚
â”‚                          â†•                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Backend API Server                          â”‚
â”‚           wls.dk-automation.de                               â”‚
â”‚                                                               â”‚
â”‚  /api/health/ping  â† Ping Endpoint (alle 30s)              â”‚
â”‚  /api/apartments   â† Apartments API                         â”‚
â”‚  /api/flush        â† Flush API                              â”‚
â”‚  /api/stats        â† Statistics API (Online Only)           â”‚
â”‚  ...                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Status-Flow-Diagramm

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   App Start     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Initialize      â”‚
                    â”‚ OnlineStatus    â”‚
                    â”‚ Store           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â†“                             â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Manual Offline?  â”‚        â”‚ Check Browser    â”‚
    â”‚ (localStorage)   â”‚        â”‚ navigator.onLine â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚                            â”‚
        â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                      â”‚
        â†“         â†“                      â†“
    â”Œâ”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ YES â”‚   â”‚  NO  â”‚        â”‚ Start Ping       â”‚
    â””â”€â”€â”¬â”€â”€â”˜   â””â”€â”€â”€â”¬â”€â”€â”˜        â”‚ Monitoring       â”‚
       â”‚          â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”             â”‚
       â†“                  â†“             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Skip Ping    â”‚   â”‚  Ping every 30 seconds       â”‚
â”‚ Monitoring   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
                            â†“
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚  Ping Server    â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â†“                           â†“
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Success âœ“    â”‚          â”‚   Failed âœ—    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                           â”‚
              â†“                           â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Reset Failures   â”‚      â”‚ Increase Failures    â”‚
   â”‚ â†’ 0              â”‚      â”‚ Count                â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â†“                     â†“
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ < 3 ?    â”‚         â”‚  >= 3 ?     â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â†‘                    â”‚
                          â”‚                    â†“
                          â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚         â”‚ Switch to        â”‚
                          â”‚         â”‚ OFFLINE Mode     â”‚
                          â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚                â”‚
                          â”‚                â†“
                          â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚      â”‚ Show Banner         â”‚
                          â”‚      â”‚ Notify User         â”‚
                          â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                             Continue Pinging
```

## Feature-VerfÃ¼gbarkeits-Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Feature              â”‚ Online  â”‚ Offline â”‚ Manual   â”‚
â”‚                              â”‚         â”‚ (Auto)  â”‚ Offline  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ LeerstandspÃ¼lungen           â”‚    âœ…   â”‚   âœ…    â”‚    âœ…    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GebÃ¤ude anzeigen (gecacht)   â”‚    âœ…   â”‚   âœ…    â”‚    âœ…    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Apartments anzeigen (gecacht)â”‚    âœ…   â”‚   âœ…    â”‚    âœ…    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ SpÃ¼lhistorie anzeigen        â”‚    âœ…   â”‚   âœ…    â”‚    âœ…    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Navigation                   â”‚    âœ…   â”‚   âœ…    â”‚    âœ…    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Offline-Sync                 â”‚    âœ…   â”‚   â¸ï¸    â”‚    â¸ï¸    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Passwort Ã¤ndern              â”‚    âœ…   â”‚   âŒ    â”‚    âŒ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Statistiken                  â”‚    âœ…   â”‚   âŒ    â”‚    âŒ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Benutzerverwaltung           â”‚    âœ…   â”‚   âŒ    â”‚    âŒ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GebÃ¤udeverwaltung            â”‚    âœ…   â”‚   âŒ    â”‚    âŒ    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Server-Ping                  â”‚    âœ…   â”‚   âœ…    â”‚    âŒ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legende:
âœ… = VerfÃ¼gbar / Aktiv
âŒ = Nicht verfÃ¼gbar
â¸ï¸ = Pausiert (wartet auf Online)
```

## UI-Komponenten-Hierarchie

```
App.vue
â””â”€â”€ DefaultLayout.vue
    â”œâ”€â”€ AppSidebar.vue
    â””â”€â”€ wrapper
        â”œâ”€â”€ AppHeader.vue
        â”‚   â”œâ”€â”€ CHeaderToggler
        â”‚   â”œâ”€â”€ CHeaderNav (Dashboard)
        â”‚   â””â”€â”€ CHeaderNav (Right)
        â”‚       â”œâ”€â”€ OnlineStatusToggle.vue ğŸ†•
        â”‚       â”‚   â””â”€â”€ CDropdown
        â”‚       â”‚       â”œâ”€â”€ CDropdownToggle (Icon + Badge)
        â”‚       â”‚       â””â”€â”€ CDropdownMenu
        â”‚       â”‚           â”œâ”€â”€ Status Details
        â”‚       â”‚           â”œâ”€â”€ CFormCheck (Manual Toggle)
        â”‚       â”‚           â”œâ”€â”€ Manual Ping Button
        â”‚       â”‚           â””â”€â”€ Feature Restrictions
        â”‚       â”œâ”€â”€ Theme Selector
        â”‚       â””â”€â”€ AppHeaderDropdownAccnt.vue
        â”‚
        â”œâ”€â”€ OfflineModeBanner.vue ğŸ†•
        â”‚   â””â”€â”€ CAlert (conditional)
        â”‚       â”œâ”€â”€ Status Icon
        â”‚       â”œâ”€â”€ Message
        â”‚       â””â”€â”€ Action Buttons
        â”‚
        â””â”€â”€ body
            â””â”€â”€ CContainer
                â””â”€â”€ router-view
                    â”œâ”€â”€ ApartmentFlushing.vue (updated)
                    â”œâ”€â”€ BuildingApartments.vue
                    â””â”€â”€ ...

ğŸ†• = Neu hinzugefÃ¼gt
```

## Datenfluss bei SpÃ¼lung (Online vs Offline)

### Online-Modus
```
User klickt "SpÃ¼lung starten"
    â†“
Component (ApartmentFlushing.vue)
    â†“
Check: onlineStatusStore.isFullyOnline
    â†“
    âœ… YES
    â†“
API Call â†’ ApiApartment.flush()
    â†“
Backend Server
    â†“
Response â†’ Success
    â†“
Update UI
Show Success Message
Navigate to next (if enabled)
```

### Offline-Modus
```
User klickt "SpÃ¼lung starten"
    â†“
Component (ApartmentFlushing.vue)
    â†“
Check: onlineStatusStore.isFullyOnline
    â†“
    âŒ NO
    â†“
OfflineFlushStorage.saveFlush()
    â†“
localStorage / IndexedDB
    â†“
Show "Offline" Badge
Update UI with local data
Show Success Message
Navigate to next (if enabled)
    â†“
    [Warten auf Online]
    â†“
OnlineStatusStore detects Online
    â†“
OfflineFlushSyncService.sync()
    â†“
Background: Send to Backend
    â†“
Remove from local storage
Update "Unsynced" Badge
```

## Status-Badge-Visualisierung

```
Online (VollstÃ¤ndig)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¶ [â—]             â”‚ â† GrÃ¼n
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Offline (Server nicht erreichbar)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš ï¸  [â—‹]             â”‚ â† Gelb
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Offline (Keine Netzwerkverbindung)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“µ [â—‹]             â”‚ â† Rot
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Offline (Manuell)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“´ [â—‹]             â”‚ â† Grau
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Checking Connection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“¶ [â—]             â”‚ â† Animiert, Blau
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Ping-Timeline

```
Zeit â†’
0s    30s   60s   90s   120s  150s  180s
â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚
â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â†’
â”‚     â”‚     â”‚     â”‚     â”‚     â”‚     â”‚
âœ“     âœ—     âœ—     âœ—     âœ“     âœ“     âœ“
      â†“     â†“     â†“     â†“
    Fail  Fail  OFFLINE  â†“
    (1)   (2)   (3)    Back Online
                        (Reset)

Legende:
âœ“ = Erfolgreicher Ping
âœ— = Fehlgeschlagener Ping
```

## LocalStorage-Struktur

```javascript
// Browser LocalStorage
{
  // Online-Status Store
  "wls-manual-offline-mode": "false",
  
  // Offline Flushes
  "wls-offline-flushes": [
    {
      "id": "temp-uuid-1",
      "apartmentId": "123",
      "buildingId": "456",
      "timestamp": 1699000000000,
      "duration": 180,
      // ...
    }
  ],
  
  // Cached Data
  "wls-apartments-cache": { /* ... */ },
  "wls-buildings-cache": { /* ... */ }
}
```

## Service Worker Cache-Struktur

```
Cache Storage:
â”œâ”€â”€ workbox-precache-v2-https://wls-app/
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ assets/index-*.js
â”‚   â”œâ”€â”€ assets/index-*.css
â”‚   â””â”€â”€ *.woff2
â”‚
â””â”€â”€ api-cache
    â”œâ”€â”€ GET:https://wls.dk-automation.de/api/apartments
    â”œâ”€â”€ GET:https://wls.dk-automation.de/api/buildings
    â””â”€â”€ ...

Max Age: 24 Stunden
Max Entries: 100
Strategy: NetworkFirst (API), Precache (Static)
```

## Integration-Checkliste fÃ¼r neue Features

Wenn Sie ein neues Feature hinzufÃ¼gen:

```
â˜ 1. BenÃ¶tigt das Feature eine Internet-Verbindung?
   â”œâ”€ JA â†’ Zu requiresOnlineFeatures hinzufÃ¼gen
   â””â”€ NEIN â†’ Offline-Implementierung planen

â˜ 2. UI-Element hinzufÃ¼gen:
   â”œâ”€ Import useOnlineStatusStore
   â”œâ”€ Check mit isFeatureAvailable()
   â””â”€ Bedingte Anzeige mit v-if

â˜ 3. API-Aufrufe absichern:
   â”œâ”€ Import useFeatureAccess
   â”œâ”€ Verwende executeIfOnline()
   â””â”€ Fehlerbehandlung implementieren

â˜ 4. Offline-Fallback (optional):
   â”œâ”€ Cached Daten nutzen
   â”œâ”€ Lokale Speicherung
   â””â”€ Sync-Mechanismus

â˜ 5. Benutzer informieren:
   â”œâ”€ Toast-Notification
   â”œâ”€ Inline-Warnung
   â””â”€ Feature-List im Status-Dropdown

â˜ 6. Dokumentation aktualisieren
```

## Deployment-Checklist

```
â˜ HTTPS konfiguriert
â˜ Service Worker wird ausgeliefert
â˜ Manifest.json mit korrektem MIME-Type
â˜ Icons in allen GrÃ¶ÃŸen vorhanden
â˜ Cache-Headers konfiguriert
â˜ Backend-CORS fÃ¼r PWA konfiguriert
â˜ Health-Ping-Endpoint verfÃ¼gbar
â˜ Browser-KompatibilitÃ¤t getestet
â˜ Mobile Installation getestet
â˜ Offline-FunktionalitÃ¤t verifiziert
â˜ Performance-Tests durchgefÃ¼hrt
```

---

**Implementiert**: 2025-11-01  
**Version**: 1.0.0  
**Status**: âœ… Produktionsbereit

